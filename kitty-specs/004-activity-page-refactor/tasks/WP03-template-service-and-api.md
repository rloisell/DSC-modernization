---
work_package_id: "WP03"
title: "TemplateService + TemplatesController (GET/POST/DELETE)"
lane: "planned"
subtasks:
  - "WP02"
phase: "Phase 3 — Template Service & API"
assignee: ""
agent: ""
shell_pid: ""
review_status: ""
reviewed_by: ""
history:
  - timestamp: "2026-02-22T03:00:00Z"
    lane: "planned"
    agent: "system"
    action: "Prompt generated by GitHub Copilot spec-kitty session"
---

# Work Package Prompt: WP03 – TemplateService + TemplatesController (GET/POST/DELETE)

## Context

Expose template CRUD via a service layer and controller.

## Files to Create/Modify

- `src/DSC.Api/Services/ITemplateService.cs` (new)
- `src/DSC.Api/Services/TemplateService.cs` (new)
- `src/DSC.Api/Controllers/TemplatesController.cs` (new)
- `src/DSC.Api/Program.cs` — register service

## Key API Contract

```
GET    /api/templates          → WorkItemTemplateDto[]  (caller's own templates)
POST   /api/templates          → 201 WorkItemTemplateDto
DELETE /api/templates/{id}     → 204 (throws ForbiddenException if not owner)
```

## Steps

1. Create `ITemplateService` with `GetAllAsync`, `CreateAsync`, `DeleteAsync`.
2. Implement `TemplateService` with ownership check on delete.
3. Create `TemplatesController` — thin HTTP delegation to service.
4. Register `ITemplateService → TemplateService` as scoped in `Program.cs`.
5. `dotnet build` — clean.

## Acceptance

- [ ] GET returns only caller's templates
- [ ] POST creates and returns new template with 201
- [ ] DELETE returns 204 for own template; 403 for other user's template
- [ ] `dotnet build` clean

