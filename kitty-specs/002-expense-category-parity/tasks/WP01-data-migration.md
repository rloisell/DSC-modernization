---
work_package_id: "WP01"
title: "Data Layer — WorkItem FK + EF Core migration"
lane: "planned"
subtasks: []
phase: "Phase 1 — Data Layer"
assignee: ""
agent: ""
shell_pid: ""
review_status: ""
reviewed_by: ""
history:
  - timestamp: "2026-02-22T03:00:00Z"
    lane: "planned"
    agent: "system"
    action: "Prompt generated by GitHub Copilot spec-kitty session"
---

# Work Package Prompt: WP01 – Data Layer — WorkItem FK + EF Core migration

## Context

Add `Guid? ExpenseCategoryId` FK to `WorkItem` entity and create the EF Core
migration.

## Files to Modify

- `src/DSC.Api/Infrastructure/WorkItem.cs`
- Run: `dotnet ef migrations add AddExpenseCategoryToWorkItem -p src/DSC.Api`

## Steps

1. Open `WorkItem.cs`; add:
   ```csharp
   public Guid? ExpenseCategoryId { get; set; }
   public ExpenseCategory? ExpenseCategory { get; set; }
   ```
2. In `ApplicationDbContext.cs`, confirm `ExpenseCategory` DbSet is registered.
3. Run the migration and inspect the generated `.cs` file — set `onDelete: ReferentialAction.SetNull`.
4. Run `dotnet build` — confirm clean.

## Acceptance

- [ ] Migration file created with correct FK and `ON DELETE SET NULL`
- [ ] `dotnet build` passes with no warnings

