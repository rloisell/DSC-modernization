---
work_package_id: "WP01"
title: "API — add timePeriod=week filter to work items endpoint"
lane: "planned"
subtasks: []
phase: "Phase 1 — API"
assignee: ""
agent: ""
shell_pid: ""
review_status: ""
reviewed_by: ""
history:
  - timestamp: "2026-02-22T03:00:00Z"
    lane: "planned"
    agent: "system"
    action: "Prompt generated by GitHub Copilot spec-kitty session"
---

# Work Package Prompt: WP01 – API — add timePeriod=week filter to work items endpoint

## Context

Add support for `?timePeriod=week` on `GET /api/items` to return only items
logged in the current calendar week.

## Files to Modify

- `src/DSC.Api/Services/WorkItemService.cs`
- `src/DSC.Api/Controllers/WorkItemController.cs`

## Steps

1. Add `string? timePeriod` parameter to `GetAllAsync` and the controller action.
2. When `timePeriod == "week"`:
   - Compute `weekStart = DateTime.UtcNow` minus `(DayOfWeek - DayOfWeek.Monday + 7) % 7` days, set to 00:00:00
   - Compute `weekEnd = weekStart.AddDays(7)`
   - Add `.Where(w => w.Date >= weekStart && w.Date < weekEnd)` to the LINQ query
   - **Remember**: use `var weekStart = ...` not `new[]` — EF Core LINQ rule
3. `dotnet build` — clean.

## Acceptance

- [ ] `GET /api/items?timePeriod=week` returns only current-week items
- [ ] Existing calls without `timePeriod` unaffected

