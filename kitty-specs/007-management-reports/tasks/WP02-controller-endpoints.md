---
work_package_id: "WP02"
title: "ReportsController — two role-gated management endpoints"
lane: "planned"
subtasks:
  - "WP01"
phase: "Phase 3 — Controller"
assignee: ""
agent: ""
shell_pid: ""
review_status: ""
reviewed_by: ""
history:
  - timestamp: "2026-02-22T03:00:00Z"
    lane: "planned"
    agent: "system"
    action: "Prompt generated by GitHub Copilot spec-kitty session"
---

# Work Package Prompt: WP02 – ReportsController — two role-gated management endpoints

## Steps

1. Add to `ReportsController`:
   ```csharp
   [HttpGet("project-effort-summary")]
   [Authorize(Roles = "Admin,Manager,Director")]
   public async Task<IActionResult> GetProjectEffortSummary()

   [HttpGet("activity-area-deviation")]
   [Authorize(Roles = "Admin,Manager,Director")]
   public async Task<IActionResult> GetActivityAreaDeviation()
   ```
2. Extract `callerId` from header; delegate to service.
3. `dotnet build` — clean.

## Acceptance

- [ ] Both endpoints accessible for Manager/Director/Admin
- [ ] User role receives 403

