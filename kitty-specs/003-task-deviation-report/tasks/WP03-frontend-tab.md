---
work_package_id: "WP03"
title: "Frontend — Task Deviation tab in Reports.jsx"
lane: "planned"
subtasks:
  - "WP02"
phase: "Phase 2 — Frontend"
assignee: ""
agent: ""
shell_pid: ""
review_status: ""
reviewed_by: ""
history:
  - timestamp: "2026-02-22T03:00:00Z"
    lane: "planned"
    agent: "system"
    action: "Prompt generated by GitHub Copilot spec-kitty session"
---

# Work Package Prompt: WP03 – Frontend — Task Deviation tab in Reports.jsx

## Context

Add the Task Deviation tab with colour-coded deviation table to the Reports page.

## Files to Modify

- `src/DSC.WebClient/src/pages/Reports.jsx`
- `src/DSC.WebClient/src/hooks/useTaskDeviationReport.js` (new)

## Steps

1. Create `useTaskDeviationReport(filters)` hook using TanStack Query;
   calls GET `/api/reports/task-deviation`.
2. In `Reports.jsx`:
   - Add "Task Deviation" as a tab option (or section if TabBar not yet in place)
   - Render table: columns = Title, Project, Date, Planned hrs, Actual hrs, Deviation hrs, Deviation %
   - Row colour logic:
     - `deviationPercent <= 0` → green background/text
     - `deviationPercent >= 10` → red background/text
     - otherwise → neutral (no extra class)
   - Show "N/A" where `deviationPercent` is null
3. Add date range filter and project filter controls above the table.

## Acceptance

- [ ] Table renders with correct data
- [ ] Three colour bands applied correctly
- [ ] Filters update the table on change
- [ ] "N/A" shown for zero-planned items

