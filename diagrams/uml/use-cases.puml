@startuml DSC Use Cases
!theme plain
left to right direction

actor "End User" as User
actor "Administrator" as Admin
actor "System" as System

rectangle "DSC Time & Expense Tracking" {
    ' Public user use cases
    package "Time Tracking" {
        usecase "View Projects" as UC1
        usecase "View Work Items" as UC2
        usecase "Create Work Item" as UC3
        usecase "Record Time Entry" as UC4
        usecase "View Time Entries" as UC5
    }

    package "Project Management" {
        usecase "View Project Details" as UC6
        usecase "View Project Assignments" as UC7
    }

    package "Authentication" {
        usecase "Login with Local Account" as UC8
        usecase "Login with OIDC (Future)" as UC9
    }

    ' Admin use cases
    package "User Administration" {
        usecase "List Users" as UC10
        usecase "Create User" as UC11
        usecase "Update User" as UC12
        usecase "Delete User" as UC13
    }

    package "Catalog Administration" {
        usecase "Manage Positions" as UC14
        usecase "Manage Departments" as UC15
        usecase "Manage Projects" as UC16
        usecase "Manage Expense Categories" as UC17
        usecase "Manage Expense Options" as UC18
        usecase "Manage Activity Codes" as UC19
        usecase "Manage Network Numbers" as UC20
        usecase "Manage Project Activity Options" as UC21
    }

    package "Data Management" {
        usecase "Seed Test Data" as UC22
        usecase "Export Data" as UC23
        usecase "Import Legacy Data" as UC24
    }
}

' User relationships
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5
User --> UC6
User --> UC7
User --> UC8

' Admin relationships
Admin --> UC10
Admin --> UC11
Admin --> UC12
Admin --> UC13
Admin --> UC14
Admin --> UC15
Admin --> UC16
Admin --> UC17
Admin --> UC18
Admin --> UC19
Admin --> UC20
Admin --> UC21
Admin --> UC22
Admin --> UC23
Admin --> UC24

' System relationships
System --> UC9 : future

' Dependencies
UC3 ..> UC1 : <<include>>
UC4 ..> UC2 : <<include>>
UC4 ..> UC1 : <<include>>

UC11 ..> UC14 : <<extend>> assign position
UC11 ..> UC15 : <<extend>> assign department

UC18 ..> UC17 : <<include>>
UC21 ..> UC16 : <<include>>
UC21 ..> UC19 : <<include>>
UC21 ..> UC20 : <<include>>

note right of UC9
  Planned migration from
  local auth to Keycloak OIDC
end note

note right of UC22
  Seeds users from FirstTest.java
  and SecondTest.java for testing
end note

note bottom of Admin
  Requires X-Admin-Token header
  (or Admin:RequireToken=false in Dev)
end note

@enduml
