---
work_package_id: "WP02"
title: "Service & DTO Layer — persist and project ExpenseCategoryName"
lane: "planned"
subtasks:
  - "WP01"
phase: "Phase 2 — Service & API Layer"
assignee: ""
agent: ""
shell_pid: ""
review_status: ""
reviewed_by: ""
history:
  - timestamp: "2026-02-22T03:00:00Z"
    lane: "planned"
    agent: "system"
    action: "Prompt generated by GitHub Copilot spec-kitty session"
---

# Work Package Prompt: WP02 – Service & DTO Layer — persist and project ExpenseCategoryName

## Context

Extend DTOs and WorkItemService to persist and return `ExpenseCategoryId` /
`ExpenseCategoryName`.

## Files to Modify

- `src/DSC.Api/DTOs/WorkItemDtos.cs` — `WorkItemCreateRequest`, `WorkItemDto`, `WorkItemDetailDto`
- `src/DSC.Api/Services/WorkItemService.cs`

## Steps

1. Add `Guid? ExpenseCategoryId` to `WorkItemCreateRequest`.
2. Add `Guid? ExpenseCategoryId` and `string? ExpenseCategoryName` to `WorkItemDto` & `WorkItemDetailDto`.
3. In `WorkItemService.CreateAsync()`: set `workItem.ExpenseCategoryId = request.ExpenseCategoryId`.
4. In list/detail queries: `.Include(w => w.ExpenseCategory)` and project
   `ExpenseCategoryName = w.ExpenseCategory != null ? w.ExpenseCategory.Description : null`.
5. Run `dotnet build` — clean.

## Acceptance

- [ ] POST `/api/items` with `expenseCategoryId` stores and returns it
- [ ] GET `/api/items` returns `expenseCategoryName` for expense items
- [ ] Non-expense items return null without error

